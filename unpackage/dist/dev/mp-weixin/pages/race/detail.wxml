<view><cu-custom vue-id="06d3ebe0-1" bgColor="bg-white" isBack="{{true}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content">赛事详情</view></cu-custom><view class="container"><view class="cover-image"><image style="width:100vw;height:80vw;" src="{{raceInfo.coverImage}}" mode="widthFix"></image></view><view class="item-header"><view class="title text-xl">{{raceInfo.title}}</view><view class="flex justify-between text-gray text-sm margin-top-sm"><block wx:if="{{raceInfo.type===0}}"><view class="cu-tag bg-red sm">官方活动</view></block><block wx:if="{{raceInfo.type===1}}"><view class="cu-tag bg-green sm">自发活动</view></block><text>{{peopleCount+"人参赛"}}</text></view><view class="flex text-gray text-sm margin-top-sm"><text class="cuIcon cuIcon-time padding-right-xs"></text>{{''+raceInfo.matchStartDate+" ~ "+raceInfo.matchEndDate+''}}</view><view class="flex text-gray text-sm margin-top-sm"><text class="cuIcon cuIcon-location padding-right-xs" style="padding-top:4rpx;"></text>{{''+raceInfo.address+''}}</view></view><view class="item-body" style="margin-top:80rpx;"><view class="title padding-sm"><view><text class="cuIcon-titles text-red"></text>赛事项目</view><block wx:if="{{raceInfo.offLineFlag}}"><view class="text-gray">请选择报名组别</view></block></view><block wx:for="{{itemList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item"><view><view class="item-title"><text class="text-xl padding-right-xs">{{item.title}}</text></view><view class="sub-title text-sm text-gray">{{item.description}}</view></view><view class="flex justify-between margin-top-xs padding-bottom-sm"><block wx:if="{{item.freeFlag===true}}"><view class="amount text-red text-lg">免费</view></block><block wx:if="{{item.freeFlag===false}}"><view class="amount text-red text-lg">{{item.amounts+"/人"}}</view></block><block wx:if="{{!raceInfo.offLineFlag}}"><view><block wx:if="{{raceInfo.status>=1&&item.registerFlag}}"><button data-event-opts="{{[['tap',[['toViewRanking',['$0'],[[['itemList','',index]]]]]]]}}" class="cu-btn round bg-orange sm margin-right-sm" bindtap="__e">查看排行</button></block><block wx:if="{{!item.registerFlag&&raceInfo.status===0}}"><button data-event-opts="{{[['tap',[['toRegister',['$0'],[[['itemList','',index]]]]]]]}}" class="cu-btn round bg-red" bindtap="__e">立即报名</button></block><block wx:if="{{item.registerFlag===true&&raceInfo.status===0}}"><button class="cu-btn round bg-blue">尚未开始</button></block><block wx:if="{{item.registerFlag===true&&raceInfo.status===1&&item.completeFlag===false}}"><button data-event-opts="{{[['tap',[['startRace',['$0'],[[['itemList','',index]]]]]]]}}" class="cu-btn round bg-blue" bindtap="__e">开始比赛</button></block><block wx:if="{{item.completeFlag===true}}"><button class="cu-btn round bg-gray">比赛完成</button></block></view></block><block wx:if="{{raceInfo.offLineFlag}}"><view><block wx:if="{{!item.registerFlag&&raceInfo.status===0&&globalRegisterFlag===false}}"><button data-event-opts="{{[['tap',[['toRegister',['$0'],[[['itemList','',index]]]]]]]}}" class="cu-btn round bg-gradual-red" bindtap="__e">立即报名</button></block><block wx:if="{{item.registerFlag}}"><button data-event-opts="{{[['tap',[['toRegister',['$0'],[[['itemList','',index]]]]]]]}}" class="cu-btn round bg-gradual-blue" style="letter-spacing:8rpx;" bindtap="__e">已报名</button></block></view></block></view></view></block></view><view class="item-body margin-top-sm margin-bottom"><view class="title padding-sm"><text class="cuIcon-titles text-red"></text>赛事详情</view><view class="desc"><jyf-parser class="vue-ref" vue-id="06d3ebe0-2" html="{{raceInfo.content}}" data-ref="article" bind:__l="__l"></jyf-parser></view></view></view><view class="{{['cu-modal',modalName=='DialogModal1'?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">赛事信息</view><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-xl"><text>{{itemInfo.description}}</text></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="cu-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['startRace',['$0'],['itemInfo']]]]]}}" class="cu-btn bg-red margin-left" bindtap="__e">去比赛</button></view></view></view></view><view class="{{['cu-modal',modalName2=='DialogModal2'?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">操作提示</view><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-xl">您还未授权，请授权登录！</view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['hideModal2',['$event']]]]]}}" class="cu-btn line-green text-green" bindtap="__e">取消</button><button class="cu-btn bg-green margin-left" open-type="getUserInfo" withCredentials="true" lang="zh_CN" data-event-opts="{{[['getuserinfo',[['wxGetUserInfo',['$event']]]]]}}" bindgetuserinfo="__e">确定</button></view></view></view></view></view>