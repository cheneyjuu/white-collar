(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/race/register"],{"06c5":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("277c"));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var r={data:function(){return{token:e.getStorageSync("id_token"),modalName:null,payload:{},index:-1,picker:["XS","S","M","L","XL","XXL","XXXL"],genderIndex:-1,genderPicker:["男","女"],gender:"",streetPicker:["南京东路街道","外滩街道","半淞园路街道","小东门街道","豫园街道","老西门街道","五里桥街道","打浦桥街道","淮海中路街道","瑞金二路街道"],streetIndex:-1,radio:"",agree:!1,offLineFlag:!1}},methods:{inviteCodeInput:function(e){this.payload.inviteCode=e.detail.value,this.payload.offLineFlag=!0},userNameInput:function(e){this.payload.userName=e.detail.value},phoneNumberInput:function(e){var t=e.detail.value;this.payload.phoneNumber=t},idCardInput:function(e){this.payload.idCard=e.detail.value;var t=e.detail.value,n="";18===t.length&&(n=t.substring(16,17));n&&(parseInt(n,10)%2===0?(this.genderIndex=1,this.payload.gender="女"):(this.genderIndex=0,this.payload.gender="男"))},companyInput:function(e){this.payload.company=e.detail.value},addressInput:function(e){this.payload.contactAddress=e.detail.value},PickerChange:function(e){this.index=e.detail.value,console.log(this.picker[this.index]),this.payload.clothesSize=this.picker[this.index]},genderPickerChange:function(e){this.genderIndex=e.detail.value,this.payload.gender=this.genderPicker[this.genderIndex]},streetPickerChange:function(e){this.streetIndex=e.detail.value,this.payload.street=this.streetPicker[this.streetIndex]},RadioChange:function(e){console.log(this.agree),this.agree=!this.agree},hideModal:function(e){this.modalName=null},gotoPrev:function(){e.navigateBack({delta:1})},activityRegister:function(){var t=this,n=this,a=e.getStorageSync("id_token"),o=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-7|9])|(?:5[0-3|5-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1|8|9]))\d{8}$/,r=/(^\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$)|(^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$)/,d=this.payload,s=d.userName,l=d.phoneNumber,c=d.idCard,u=d.contactAddress,f=d.clothesSize,h=d.inviteCode;if(o.test(l))if(r.test(c))if(!s||s.length<1)e.showToast({icon:"none",title:"请输入姓名!"});else if(!u||u.length<1)e.showToast({icon:"none",title:"请输入联系地址!"});else{if(n.offLineFlag){if(!f)return void e.showToast({icon:"none",title:"请选择衣服尺码!"});if(!h)return void e.showToast({icon:"none",title:"请输入邀请码!"})}var g="";15===c.length&&(g=c.substring(14,15)),18===c.length&&(g=c.substring(16,17));var p="";"x"!==g&&"X"!==g||(p="女"),p=parseInt(g,10)%2===0?"女":"男",this.payload.gender===p?e.request({url:"".concat(i.baseUrl,"/races/items/register"),method:"POST",header:{"content-type":"application/json",Authorization:"Bearer "+a},data:this.payload,success:function(n){console.log(n);var i=n.data;200===i.code?t.modalName="DialogModal1":e.showToast({icon:"none",title:i.message,duration:2e3})},fail:function(){},complete:function(){}}):e.showToast({icon:"none",title:"身份证和性别不符!"})}else e.showToast({icon:"none",title:"输入的身份证有误!"});else e.showToast({icon:"none",title:"输入的手机号码有误!"})}},onLoad:function(e){console.log(e);var t=e.raceId,n=e.itemId;this.offLineFlag=JSON.parse(e.offLineFlag),this.payload.raceId={id:t},this.payload.itemId={id:n},console.log("offline flag"),console.log(this.offLineFlag)}};t.default=r}).call(this,n("543d")["default"])},"1f60":function(e,t,n){"use strict";var i=n("dcb5"),a=n.n(i);a.a},"462b":function(e,t,n){"use strict";(function(e){n("18a1");i(n("66fd"));var t=i(n("f58c"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"63a4":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},"9be3":function(e,t,n){"use strict";n.r(t);var i=n("06c5"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},dcb5:function(e,t,n){},f58c:function(e,t,n){"use strict";n.r(t);var i=n("63a4"),a=n("9be3");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("1f60");var r,d=n("f0c5"),s=Object(d["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=s.exports}},[["462b","common/runtime","common/vendor"]]]);