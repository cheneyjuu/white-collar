(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/details"],{"2b62":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"4abe":function(t,e,a){"use strict";(function(t){a("18a1");i(a("66fd"));var e=i(a("d44e"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"9c81":function(t,e,a){"use strict";a.r(e);var i=a("c508"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},c508:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("277c"));function n(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=i?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(a,o,r):a[o]=t[o]}return a.default=t,e&&e.set(t,a),a}var r={data:function(){return{token:t.getStorageSync("id_token"),activity:{},payload:{}}},methods:{loadActivityInfo:function(e){var a=this;t.request({url:"".concat(i.baseUrl,"/activities/").concat(e,"/details"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var e=t.data.data;a.activity=e},fail:function(){},complete:function(){}})},activityRegister:function(e){var a=this.token;a?t.navigateTo({url:"/pages/activity/signup?activityId="+e.id}):t.reLaunch({url:"/pages/mine/home?activityId="+e.id})},onShare:function(){t.showShareMenu({success:function(){console.log("share success")}})},onInteractive:function(e,a){var n=t.getStorageSync("id_token");if(n){var o={recordId:e.activityId.id,recordType:"ACTIVITY",interactiveType:a};t.request({url:"".concat(i.baseUrl,"/interactive"),data:o,method:"POST",header:{"content-type":"application/json",Authorization:"Bearer "+n},success:function(t){var i=t.data;200===i.code&&("LIKE"===a&&(null!==i.data?e.userLikeFlag=!0:e.userLikeFlag=!1),"FAVOR"===a&&(null!==i.data?e.userFavorFlag=!0:e.userFavorFlag=!1))}})}else t.showToast({icon:"none",title:"您还未登录"})},toRegister:function(){var e=this,a=t.getStorageSync("id_token");a?!0===e.activity.thirdAppFlag?(this.recordPresonInfo(),wx.navigateToMiniProgram({appId:e.activity.appId,path:e.activity.pagePath,extraData:null===e.activity.extraData?{}:JSON.parse(e.activity.extraData),envVersion:"release",success:function(t){console.log("跳转成功"),console.log(t)}})):t.navigateTo({url:"/pages/activity/signup?activityId="+e.activity.activityId.id}):t.showToast({icon:"none",title:"您还未登录"})},recordPresonInfo:function(){var e=t.getStorageSync("id_token");this.payload.activityId=this.activity.activityId,t.request({url:"".concat(i.baseUrl,"/activities/register"),method:"POST",header:{"content-type":"application/json",Authorization:"Bearer "+e},data:this.payload,success:function(t){console.log(t)},fail:function(){},complete:function(){}})}},onLoad:function(t){var e=t.activityId;this.loadActivityInfo(e)},onShareAppMessage:function(){return{title:this.activity.title,path:"/pages/activity/details?activityId="+this.activity.activityId.id,imageUrl:this.activity.coverImage}}};e.default=r}).call(this,a("543d")["default"])},d44e:function(t,e,a){"use strict";a.r(e);var i=a("2b62"),n=a("9c81");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);var r,c=a("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports}},[["4abe","common/runtime","common/vendor"]]]);