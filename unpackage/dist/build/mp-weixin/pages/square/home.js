(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/square/home"],{"2f7d":function(t,e,a){"use strict";(function(t){a("18a1");i(a("66fd"));var e=i(a("5208"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"39fc":function(t,e,a){"use strict";a.r(e);var i=a("4c86"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"4c86":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("277c"));function n(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var c=i?Object.getOwnPropertyDescriptor(t,o):null;c&&(c.get||c.set)?Object.defineProperty(a,o,c):a[o]=t[o]}return a.default=t,e&&e.set(t,a),a}var c={name:"square",data:function(){return{token:t.getStorageSync("id_token"),activityData:[],cardCur:0,adCardCur:0,swiperList:[{id:0,type:"image",url:"https://s1.ax1x.com/2020/05/24/Yztohd.jpg"},{id:1,type:"image",url:"https://s1.ax1x.com/2020/05/24/Yzt5Ae.jpg"},{id:2,type:"image",url:"https://s1.ax1x.com/2020/05/23/Yxngvd.jpg"},{id:3,type:"image",url:"https://s1.ax1x.com/2020/05/23/YvVQ4H.jpg"},{id:4,type:"image",url:"https://bkimg.cdn.bcebos.com/pic/023b5bb5c9ea15ce36d3e190bd492df33a87e950145b?x-bce-process=image/watermark,g_7,image_d2F0ZXIvYmFpa2U5Mg==,xp_5,yp_5"}],adSwiperList:[{id:0,type:"image",url:"https://s1.ax1x.com/2020/05/24/YzNvKx.png"},{id:1,type:"image",url:"http://img1.imgtn.bdimg.com/it/u=203303443,3834206322&fm=26&gp=0.jpg"},{id:2,type:"image",url:"http://5b0988e595225.cdn.sohucs.com/images/20180119/fabd2cf216114be0b460c7f4a0d0563c.jpeg"}],dotStyle:!1,towerStart:0,direction:"",cuIconList:[{cuIcon:"newsfill",color:"yellow",badge:0,name:"政策信息"},{cuIcon:"creativefill",color:"blue",badge:0,name:"白领创潮"},{cuIcon:"shopfill",color:"red",badge:0,name:"楼宇联盟"},{cuIcon:"upstagefill",color:"orange",badge:0,name:"白领赛事"}],modalName:null,gridCol:4,gridBorder:!1,menuBorder:!1,menuArrow:!1,menuCard:!1,skin:!1,listTouchStart:0,listTouchDirection:null,firstBannerList:[],secondBannerList:[],policyList:[],topicList:[],buildingList:[]}},methods:{viewForm:function(){t.navigateTo({url:"../square/form"})},cardSwiper:function(t){this.adCardCur=t.detail.current},viewH5Page:function(e){t.navigateTo({url:"/pages/activity/h5view?url="+e})},viewQuestionnaire:function(){t.navigateTo({url:"/pages/square/questionnaire"})},viewBanner:function(e){var a=t.getStorageSync("id_token");a?("ACTIVITY"===e.channel&&t.navigateTo({url:"/pages/activity/details?activityId=".concat(e.uniId)}),"TOPIC"===e.channel&&("FINANCIAL_POLICY"===e.articleType&&t.navigateTo({url:"/pages/policy/details?topicId=".concat(e.uniId)}),"WHITE_COLLAR_CREATOR"===e.articleType&&t.navigateTo({url:"/pages/topic/details?topicId=".concat(e.uniId)}),"BUILDING"===e.articleType&&t.navigateTo({url:"/pages/building/details?topicId=".concat(e.uniId)}),"VOTE"===e.articleType&&t.navigateTo({url:"/pages/vote/home?voteId=".concat(e.uniId)})),"VOTE"===e.channel&&t.navigateTo({url:"/pages/vote/home?voteId=".concat(e.uniId)}),"RACE"===e.channel&&t.navigateTo({url:"/pages/race/detail?raceId=".concat(e.uniId)})):this.modalName="DialogModal1"},adImgClicked:function(e){var a=t.getStorageSync("id_token");a?0===e?t.navigateTo({url:"/pages/activity/h5view?url=https://mp.weixin.qq.com/s/Z7i2EotzhnObWzNOVZERnA"}):1===e&&t.navigateTo({url:"/pages/square/questionnaire"}):this.modalName="DialogModal1"},viewSubMenu:function(e){console.log(e),0===e&&t.navigateTo({url:"/pages/policy/index?articleType=0"}),1===e&&t.navigateTo({url:"/pages/topic/home"}),2===e&&t.navigateTo({url:"/pages/building/index"}),3===e&&t.navigateTo({url:"/pages/race/race"})},loadActivity:function(){var e=this;t.request({url:"".concat(i.baseUrl,"/activities/index"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var a=t.data.data;a&&a.forEach((function(t){t.typeStr=0===t.type?"官方":"自发"})),e.activityData=a},fail:function(){},complete:function(){}})},viewActivityDetails:function(e){var a=t.getStorageSync("id_token");a?t.navigateTo({url:"/pages/activity/details?activityId=".concat(e.id)}):this.modalName="DialogModal1"},loadBanners:function(){var e=this;t.request({url:"".concat(i.baseUrl,"/banners"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var a=t.data.data;console.log(a),e.firstBannerList=a["firstBannerList"],e.secondBannerList=a["secondBannerList"]},fail:function(){},complete:function(){}})},loadPolicyData:function(){var e=this;t.request({url:"".concat(i.baseUrl,"/topic/index?articleType=0"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var a=t.data.data;e.policyList=a},fail:function(){},complete:function(){}})},loadTopicData:function(){var e=this;t.request({url:"".concat(i.baseUrl,"/topic/index?articleType=1"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var a=t.data.data;e.topicList=a},fail:function(){},complete:function(){}})},loadBuildingData:function(){var e=this;t.request({url:"".concat(i.baseUrl,"/topic/index?articleType=2"),method:"GET",header:{"content-type":"application/json",Authorization:"Bearer "+this.token},success:function(t){var a=t.data.data;e.buildingList=a},fail:function(){},complete:function(){}})},viewPolicyDetails:function(e){var a=t.getStorageSync("id_token");a?t.navigateTo({url:"/pages/policy/details?topicId=".concat(e.id)}):this.modalName="DialogModal1"},viewTopicDetails:function(e){var a=t.getStorageSync("id_token");a?t.navigateTo({url:"/pages/topic/details?topicId=".concat(e.id)}):this.modalName="DialogModal1"},viewBuildingDetails:function(e){var a=t.getStorageSync("id_token");a?t.navigateTo({url:"/pages/building/details?topicId=".concat(e.id)}):this.modalName="DialogModal1"},onInteractive:function(e,a){var n=t.getStorageSync("id_token");if(n){var o={recordId:e.topicId.id,recordType:e.articleType,interactiveType:a};t.request({url:"".concat(i.baseUrl,"/interactive"),data:o,method:"POST",header:{"content-type":"application/json",Authorization:"Bearer "+n},success:function(t){var i=t.data;200===i.code&&("LIKE"===a&&(null!==i.data?(e.userLikeFlag=!0,e.likeCount+=1):(e.userLikeFlag=!1,e.likeCount-=1)),"FAVOR"===a&&(null!==i.data?(e.userFavorFlag=!0,e.favorCount+=1):(e.userFavorFlag=!1,e.favorCount-=1)))}})}else t.showToast({icon:"none",title:"您还未登录"})},hideModal:function(t){this.modalName=null},gotoLogin:function(){this.modalName=null,t.reLaunch({url:"/pages/mine/home"})}},onShow:function(){var e=t.getStorageSync("id_token");e||(this.modalName="DialogModal1"),this.loadActivity(),this.loadBanners(),this.loadPolicyData(),this.loadTopicData(),this.loadBuildingData()}};e.default=c}).call(this,a("543d")["default"])},5208:function(t,e,a){"use strict";a.r(e);var i=a("a6a7"),n=a("39fc");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("705c");var c,r=a("f0c5"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);e["default"]=l.exports},"705c":function(t,e,a){"use strict";var i=a("99fd"),n=a.n(i);n.a},"99fd":function(t,e,a){},a6a7:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}))}},[["2f7d","common/runtime","common/vendor"]]]);